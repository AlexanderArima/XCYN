<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta charset="utf-8" />
    <link href="../../plugin/layui/css/layui.css" rel="stylesheet" />
</head>
<body>
    <div class="layui-container" id="div_container">
        <div>
            <ul class="layui-nav" lay-filter="">
                <li class="layui-nav-item"><a href="">最新活动</a></li>
                <li class="layui-nav-item layui-this"><a href="">产品</a></li>
                <li class="layui-nav-item"><a href="">大数据</a></li>
                <li class="layui-nav-item">
                    <a href="javascript:;">解决方案</a>
                    <dl class="layui-nav-child">
                        <!-- 二级菜单 -->
                        <dd><a href="">移动模块</a></dd>
                        <dd><a href="">后台模版</a></dd>
                        <dd><a href="">电商平台</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item"><a href="">社区</a></li>
            </ul>

        </div>

        <div class="layui-row" style="height:33px;line-height:33px;font-size: 15px;">
            <div class="layui-col-md12" id="div_category">
                <a href="#" v-for="category in list_category">{{category.category_name}} |  </a>
            </div>
        </div>

        <!--<hr class="layui-bg-blue">-->

        <fieldset class="layui-elem-field layui-field-title">
            <legend>热门推荐</legend>
            <div class="layui-field-box">
                <table class="layui-table" lay-size="lg" lay-skin="line">
                    <colgroup>
                        <col width="70">
                        <col>
                    </colgroup>
                    <tbody>
                        <tr v-for="item in list_hot">
                            <td><img v-bind:src="item.avatar" style="width:46px; height:46px; border-radius:50%;" /></td>
                            <td>

                                <div style="width:970px;padding-bottom: 10px;">
                                    <div style="color:white;background-color:red;width:40px;float:left" v-if="item.title_type == 2">&nbsp;转&nbsp;载&nbsp;</div>
                                    <div style="color:white;background-color:blue;width:40px;float:left" v-if="item.title_type == 1">&nbsp;原&nbsp;创&nbsp;</div>
                                    <a href="#">&nbsp;&nbsp;{{item.title}}</a> 置顶
                                </div>

                                <div>
                                    {{item.nick_name}} 于{{item.add_time}}发表
                                    <i class="layui-icon" style="font-size: 15px; color: #1E9FFF;padding: 0 5px 0 5px;">&#xe606;</i>{{item.comment_count}}
                                    <i class="layui-icon" style="font-size: 15px; color: #1E9FFF;padding: 0 5px 0 5px;">&#xe6c6;</i>{{item.great_count}}
                                </div>

                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset>

        <fieldset class="layui-elem-field layui-field-title">
            <legend>最新更新</legend>
            <div class="layui-field-box">
                <table class="layui-table" lay-size="lg" lay-skin="line">
                    <colgroup>
                        <col width="70">
                        <col>
                    </colgroup>
                    <tbody>
                        <tr v-for="item in list_top">
                            <td><img v-bind:src="item.avatar" style="width:46px; height:46px; border-radius:50%;" /></td>
                            <td>

                                <div style="width:970px;padding-bottom: 10px;">
                                    <div style="color:white;background-color:red;width:40px;float:left" v-if="item.title_type == 2">&nbsp;转&nbsp;载&nbsp;</div>
                                    <div style="color:white;background-color:blue;width:40px;float:left" v-if="item.title_type == 1">&nbsp;原&nbsp;创&nbsp;</div>
                                    <a href="#">&nbsp;&nbsp;{{item.title}}</a> 置顶
                                </div>

                                <div>
                                    {{item.nick_name}} 于{{item.add_time}}发表
                                    <i class="layui-icon" style="font-size: 15px; color: #1E9FFF;padding: 0 5px 0 5px;">&#xe606;</i>{{item.comment_count}}
                                    <i class="layui-icon" style="font-size: 15px; color: #1E9FFF;padding: 0 5px 0 5px;">&#xe6c6;</i>{{item.great_count}}
                                </div>

                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset>
    </div>
        
    <!--<script src="../../plugin/require/require.js" defer async="true" data-main="../../Scripts/BBS/index"></script>-->
    <script src="../../plugin/jquery/jquery-1.11.1.min.js"></script>
    <script src="../../plugin/vue/vue.js"></script>
    <script src="../../plugin/layui/layui.all.js"></script>
    <script src="../../plugin/lodash/lodash.js"></script>
    <script>
        window.onload = function () {
            
            var v = new Vue({
                el: "#div_container",
                data: {
                    list_category: null,
                    list_hot: null,
                    list_top:null
                }
            })

            layer.load(2,{time:10 * 1000});
            
            $.get("http://localhost:55898/Lottery/BBS/GetIndex", function (data) {
                var obj = eval("(" + data + ")");
                console.log(obj.obj)
                if (obj.result == 1) {
                    v.$data.list_category = obj.obj.list_category;
                    var list_hot = obj.obj.list_hot;
                    v.$data.list_hot = list_hot;
                    _.forEach(list_hot, function (value, key) {
                        console.log(value);
                        value.avatar = "../../" + value.avatar;
                    });
                    var list_top = obj.obj.list_top;
                    v.$data.list_top = list_top;
                    _.forEach(list_top, function (value, key) {
                        console.log(value);
                        value.avatar = "../../" + value.avatar;
                    });
                }
                else {
                    console.log(obj.message);
                }
                layer.closeAll();
            });
        }
    </script>
</body>
</html>
